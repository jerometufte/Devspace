// TODO: rename this to swipecore.core.js
(function(a,b){var c=a.SwipeCore,d={};d.VERSION="0.5.3",d.noConlict=function(){return a.SwipeCore=c,d},d.hasTouch=function(){try{if(document.createEvent("TouchEvent").initTouchEvent)return!0}catch(a){return!1}},d.gestures=function(){return d.hasTouch()?{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}:{start:"mousedown",move:"mousemove",end:"mouseup"}};var e=Array.prototype.forEach,f={},g=function(a,b,c){if(a==null)return;if(e&&a.forEach===e)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,g=a.length;d<g;d++)if(d in a&&b.call(c,a[d],d,a)===f)return}else for(var h in a)if(hasOwnProperty.call(a,h)&&b.call(c,a[h],h,a)===f)return};d.objExtend=function(a){var b=Array.prototype.slice;return g(b.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=b[c])}),a};var h=function(c,e){this.timestamp=new Date,this.position={x:c.pageX,y:c.pageY},e.startTouch?this.duration=new Date-e.startTouch.timestamp:this.duration=0;if(e.lastTouch){var f=e.lastTouch,g={x:f.position.x-this.position.x,y:f.position.y-this.position.y},h=180/Math.PI*Math.atan2(g.y,g.x);h=h<0?h+360:h,h+=90,h=h>360?h-360:h,this.velocity={speed:Math.sqrt(Math.pow(g.x,2)+Math.pow(g.y,2))/((new Date-f.timestamp)/1e3),bearing:h}}else this.velocity={speed:b,direction:b};if(e.startTouch){var i=e.startTouch,j={x:this.position.x-i.position.x,y:this.position.y-i.position.y},h=180/Math.PI*Math.atan2(j.y,j.x);h=h<0?h+360:h,h+=90,h=h>360?h-360:h,this.displacement={x:j.x,y:j.y,distance:Math.sqrt(Math.pow(j.x,2)+Math.pow(j.y,2)),bearing:h}}else this.displacement={x:0,y:0,distance:0,bearing:b};d.hasTouch()?this.target=document.elementFromPoint(this.position.x-a.scrollX,this.position.y-a.scrollY):this.target=c.target},i=[],j=[],k=function(a,c){var e=this;this.touches=[];var f=[];if(j.length!==0){var g=[],k=[],l=a.touches.length-1;for(var m=0;m<a.touches.length;m++){var n=a.touches[m],o=Infinity,p=0;for(var q=0;q<j.length;q++){var r=d.Geometry.distanceBtw(j[q].position,{x:n.pageX,y:n.pageY});r<o&&(o=r,p=q)}if(k[p]!==b){var s=k[p],t=d.Geometry.distanceBtw({x:a.touches[s].pageX,y:a.touches[s].pageY},j[p].position),u=d.Geometry.distanceBtw({x:n.pageX,y:n.pageY},j[p].position);u>t?g[m]=l--:(g[s]=l--,g[m]=p)}else k[p]=m,g[m]=p}for(var m=0;m<a.touches.length;m++){var v=g[m];f[v]=a.touches[m]}f=f.filter(function(a){return a!==b})}for(var m=0;m<a.touches.length;m++)j.length!==0?(this.touches[m]=new h(f[m],{startTouch:i[m],lastTouch:j[m]}),i[m]||(i[m]=this.touches[m])):this.touches[m]=new h(a.touches[m],{});this._rotation=a.rotation,this._scale=a.scale,j=this.touches};k.prototype.get=function(a){return this.touches[a]},k.prototype.each=function(a){for(var b=0;b<this.touches.length;b++)a(this.touches[b],b)},k.prototype.getLength=function(){return this.touches.length},k.prototype.getLeftMostTouch=function(){var a,c;return this.each(function(d){if(c===b||d.position.x<c)c=d.position.x,a=d}),a},k.prototype.getRightMostTouch=function(){var a,c;return this.each(function(d){if(c===b||d.position.x>c)c=d.position.x,a=d}),a},k.prototype.getTopTouch=function(){},k.prototype.getBottomTouch=function(){},k.prototype.getAveragedDisplacement=function(){var a={x:0,y:0};return this.each(function(b){a.x+=b.displacement.x,a.y+=b.displacement.y}),a.x/=this.getLength(),a.y/=this.getLength(),a},k.prototype.sortTouchClockwise=function(){var a=[];this.each(function(b,c){a.push(b.position)});var b=a[0];for(var c=1;c<a.length;c++){var d=a[c];if(d.y>b.y||d.y==b.y&&d.x<b.x)b=d}var e=function(a,b){var c=b.y-a.y,d=b.x-a.x;return c/d},f=function(a,c){if(a==b)return-1;if(c==b)return 1;var d=e(a,b),f=e(c,b);return d==f?a.distance(b)<c.distance(b)?-1:1:d<=0&&f>0?-1:d>0&&f<=0?1:d>f?-1:1};return a=a.sort(f),a},k.prototype.getScale=function(){var a=this.getLength();if(a===0)throw new Error("SwipeCore: Touches.getSize: There is no touch object");if(a===1)return 0;if(a===2){var b=this.get(0).position,c=this.get(1).position,e=d.Geometry.distanceBtw(b,c);return e}if(a===3){var b=this.get(0).position,c=this.get(1).position,f=this.get(2).position,g=this.getCentroid(),e=d.Geometry.distanceBtw(b,g)+d.Geometry.distanceBtw(c,g)+d.Geometry.distanceBtw(f,g);return e}var h=this.sortTouchClockwise(),i=0;for(var j=0;j<h.length-1;j++)i+=h[j].x*h[j+1].y-h[j+1].x*h[j].y;return i+=h[h.length-1].x*h[0].y-h[0].x*h[h.length-1].y,i=Math.abs(-i/2),i},k.prototype.getCentroid=function(){var a=this.getLength();if(a===0)throw new Error("SwipeCore: Touches.getCntroid: There is no touch object");if(a===1)return this.get(0).position;if(a===2){var b=this.get(0).position,c=this.get(1).position,d={x:(b.x+c.x)/2,y:(b.y+c.y)/2};return d}if(a===3){var b=this.get(0).position,c=this.get(1).position,e=this.get(2).position,f={x:(b.x+c.x+e.x)/3,y:(b.y+c.y+e.y)/3};return f}var g=this.getScale(),f={x:0,y:0},h=this.sortTouchClockwise();h.push(h[0]);for(var i=0;i<h.length-1;i++){var b=h[i],c=h[i+1],j=b.x*c.y-c.x*b.y;f.x+=(b.x+c.x)*j,f.y+=(b.y+c.y)*j}return f.x/=-6*g,f.y/=-6*g,console.log(f.x),f},k.prototype.getOrientation=function(){var a=this.getLength();if(a<2)throw new Error("SwipeCore: Touches.getOrientation: requires 2 or more fingers");if(a===2){var b=this.get(0).position,c=this.get(1).position,e=d.Geometry.bearingBtw(b,c);return e}if(a===3){var b=this.get(0).position,c=this.get(1).position,f=this.get(2).position,g=d.Geometry.bearingBtw(b,c),h=d.Geometry.bearingBtw(c,f),i=d.Geometry.bearingBtw(b,f),e=(g+h+i)/3;return g}return this._rotation};var l,m,n,o=function(a){if(a instanceof MouseEvent)a.touches=[a];else if(!(a instanceof TouchEvent))throw new Error("Input event not recognized");var b=new k(a,{});return l=b,m=b.getLength(),n=b.getLength(),{type:a.type,touches:b,originalEvent:a,minNumFinger:m,maxNumFinger:n}},p=function(a){if(a instanceof MouseEvent)a.touches=[a];else if(!(a instanceof TouchEvent))throw new Error("Input event not recognized");var b=new k(a,{});return l=b,m=b.getLength()<m?b.getLength():m,n=b.getLength()>n?b.getLength():n,{type:a.type,touches:b,originalEvent:a,minNumFinger:m,maxNumFinger:n}},q=function(a){if(a instanceof MouseEvent)a.touches=[a];else if(!(a instanceof TouchEvent))throw new Error("Input event not recognized");return i=[],j=[],{type:a.type,touches:l,originalEvent:a,minNumFinger:m,maxNumFinger:n}};d.extend=function(c){var e=function(e){if(!e||e.DOCUMENT_NODE!==9)throw new Error("SwipeCore: element is not of a document node, or not a DOM element at all");this.el=e;var f=d.gestures(),g=c.constructor.apply(this,Array.prototype.slice.call(arguments,1)),h;if(g===b)h=this.el;else{if(g===null)return;h=g}Array.isArray(h)||(h=[h]);var i=this,j=!1,k=function(a){if(j)return;j=!0;var b=o(a);c.onTouchStart.call(i,b)},l=function(a){if(j===!0){var b=p(a);c.onTouchMove.call(i,b)}},m=function(a){if(!a.touches||a.touches.length===0){j=!1;var b=q(a);c.onTouchEnd.call(i,b)}},n=function(a){if(!a.touches||a.touches.length===0)j=!1};this.attach=function(b){c.attach&&c.attach.call(this,b);for(var d=0;d<h.length;d++)h[d].addEventListener(f.start,k,!1),h[d].addEventListener(f.move,l,!1),h[d].addEventListener(f.end,m,!1),a.addEventListener(f.end,n,!1)},this.detach=function(){c.detach&&c.detach.call(this);for(var b=0;b<h.length;b++)h[b].removeEventListener(f.start,k,!1),h[b].removeEventListener(f.move,l,!1),h[b].removeEventListener(f.end,m,!1),a.removeEventListener(f.end,n,!1)},this.destroy=function(){c.destroy&&c.destroy.call(this),this.detach();for(key in this)delete this[key]},this.attach({firstTime:!0})};for(key in c.public)e.prototype[key]=c.public[key];return e},typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=d),exports.SwipeCore=d):typeof define=="function"&&define.amd?define("swipecore",function(){return d}):a.SwipeCore=d})(window,undefined),function(a,b){var c={},d=Array.prototype.forEach,e={},f=function(a,b,c){if(a==null)return;if(d&&a.forEach===d)a.forEach(b,c);else if(a.length===+a.length){for(var f=0,g=a.length;f<g;f++)if(f in a&&b.call(c,a[f],f,a)===e)return}else for(var h in a)if(hasOwnProperty.call(a,h)&&b.call(c,a[h],h,a)===e)return};c.defaults=function(a){var a=a||{},b=Array.prototype.slice;return f(b.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},c.extend=function(a){var b=Array.prototype.slice;return f(b.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=b[c])}),a},c.clone=function(a){return c.defaults({},a)},c.searchStyleSheetsByTitle=function(a){for(var b=0;b<document.styleSheets.length;b++)if(document.styleSheets[b].title===a)return b;return-1},c.addStyleSheetsByTitle=function(a){var b=document.createElement("style");return b.type="text/css",b.rel="stylesheet",b.media="screen",b.title=a,document.getElementsByTagName("head")[0].appendChild(b),c.searchStyleSheetsByTitle(a)},c.addCSSRulesToStyleSheet=function(a,b){for(var c=0;c<b.length;c++)a.addRule(b[c].selector,b[c].style)};var g=0;c.uniqueId=function(a){var b=g++;return a?a+b:b};if(!a.SwipeCore||!!a.SwipeCore.Utils)throw new Error("SwipeCore.Util: SwipeCore is not defined in window, or SwipeCore.Utils is already defined");a.SwipeCore.Utils=c}(window,undefined),function(a,b){var c={};c.distanceBtw=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},c.bearingBtw=function(a,b){var c,d={x:Math.abs(b.x-a.x),y:Math.abs(b.y-a.y)},e=180/Math.PI*Math.atan2(d.x,d.y),f=180/Math.PI*Math.atan2(d.y,d.x);return b.y-a.y>0?b.x-a.x>0?c=90+f:c=180+e:b.x-a.x>0?c=e:c=270+f,c},c.deg2Rad=function(a){return a*Math.PI/180},c.rad2Deg=function(a){return a*180/Math.PI};if(!a.SwipeCore||!!a.SwipeCore.Geometry)throw new Error("SwipeCore.Geometry: SwipeCore is not defined in window, or SwipeCore.Geometry is already defined");a.SwipeCore.Geometry=c}(window,undefined),function(a,b){var c={};c.objectifyTransformStyle=function(a){if(a.length===0)return{};var b=a.match(/( ?\w*\([-\d,\. pxdeg]*\))/g),c={};for(var d=0;d<b.length;d++)if(b[d].indexOf("rotate")!==-1){var e=b[d].match(/([\w]+)\((-?\d*\.?\d*)deg(, (-?\d*\.?\d*)deg)?(, (-?\d*\.?\d*)deg)?\)/);c[e[1]]={x:e[2],y:e[4],z:e[6]}}else{var e=b[d].match(/([\w]+)\((-?\d*\.?\d*)p?x?, (-?\d*\.?\d*)p?x?(, (-?\d*\.?\d*)p?x?)?\)/);c[e[1]]={x:e[2],y:e[3],z:e[5]}}return c},c.stringifyTransformStyle=function(a){var b="";for(style in a)style.match("translate")?(a[style].x+="px",a[style].y+="px",style.match("3d")&&(a[style].z+="px"),b+=style+"("+a[style].x+", "+a[style].y,style.match("3d")&&(b+=", "+a[style].z)):style.match("rotate")?(a[style].x+="deg",a[style].y&&(a[style].y+="deg"),a[style].z&&(a[style].z+="deg"),b+=style+"("+a[style].x,style.match("3d")&&(b+=", "+a[style].y+", "+a[style].z)):(b+=style+"("+a[style].x+", "+a[style].y,style.match("3d")&&(b+=", "+a[style].z)),b+=") ";return b},c.translate2d=function(a,b,c){var d=SwipeCore.Transform.objectifyTransformStyle(a.style.webkitTransform);d.translate3d={x:b,y:c,z:0},a.style.webkitTransform=SwipeCore.Transform.stringifyTransformStyle(d)},c.rotateX=function(a,b){var c=SwipeCore.Transform.objectifyTransformStyle(a.style.webkitTransform);c.rotate={x:b},a.style.webkitTransform=SwipeCore.Transform.stringifyTransformStyle(c)},c.scale2d=function(a,b,c){var d=SwipeCore.Transform.objectifyTransformStyle(a.style.webkitTransform);d.scale3d={x:b,y:c,z:1},a.style.webkitTransform=SwipeCore.Transform.stringifyTransformStyle(d)};if(!a.SwipeCore||!!a.SwipeCore.Transform)throw new Error("SwipeCore.Transform: SwipeCore is not defined in window, or SwipeCore.Transform is already defined");a.SwipeCore.Transform=c}(window,undefined),function(a,b){var c={};c.bind=function(a,b,c){var d=this._callbacks||(this._callbacks={}),e=d[a]||(d[a]=[]);return e.push([b,c]),this},c.unbind=function(a,b){var c;if(!a)this._callbacks={};else if(c=this._callbacks)if(!b)c[a]=[];else{var d=c[a];if(!d)return this;for(var e=0,f=d.length;e<f;e++)if(d[e]&&b===d[e][0]){d[e]=null;break}}return this},c.trigger=function(a){var b,c,d,e,f,g=2;if(!(c=this._callbacks))return this;while(g--){d=g?a:"all";if(b=c[d])for(var h=0,i=b.length;h<i;h++)(e=b[h])?(f=g?Array.prototype.slice.call(arguments,1):arguments,e[0].apply(e[1]||this,f)):(b.splice(h,1),h--,i--)}return this};if(!a.SwipeCore||!!a.SwipeCore.Events)throw new Error("SwipeCore.Events: SwipeCore is not defined in window, or SwipeCore.Events is already defined");a.SwipeCore.Events=c}(window,undefined),function(a,b){var c=a.SwipeCore,d=5,e=function(a,b,c){var d=!1,e=250,f=c/2;if(b===0)return!1;if(a===0)return!1;var g=f/e;if(b<e){var h=f/Math.pow(e,2),i=1,j=Math.max(20,h*Math.pow(b/i,2));Math.abs(a)>=j&&(d=!0)}else Math.abs(a)>=f&&(d=!0);return d},f=function(a,b,c,d,e,f){function m(a){return((g*a+h)*a+i)*a}function n(a){return((j*a+k)*a+l)*a}function o(a){return(3*g*a+2*h)*a+i}function p(a){return 1/(200*a)}function q(a,b){return n(r(a,b))}function r(a,b){function i(a){return a>=0?a:0-a}var c,d,e,f,g,h;for(e=a,h=0;h<8;h++){f=m(e)-a;if(i(f)<b)return e;g=o(e);if(i(g)<1e-6)break;e-=f/g}c=0,d=1,e=a;if(e<c)return c;if(e>d)return d;while(c<d){f=m(e);if(i(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)*.5+c}return e}var g=0,h=0,i=0,j=0,k=0,l=0;return i=3*b,h=3*(d-b)-i,g=1-i-h,l=3*c,k=3*(e-c)-l,j=1-l-k,q(a,p(f))},g=function(a,b){var c={};return this.swipeAxis.indexOf("horizontal")!==-1&&(c.x=this.el.clientWidth/this.el.parentNode.clientWidth),this.swipeAxis.indexOf("vertical")!==-1&&(c.y=this.el.clientHeight/this.el.parentNode.clientHeight),c},h=function(d,e){var f={noTransition:!1,updatePagination:!0},g=c.Utils.defaults(e,f),h={x:this.currentPage.x,y:this.currentPage.y};this._.newCurrentPage=c.Utils.clone(h),d.x!=null&&(!this.opts.keepInContainer||d.x>=0&&d.x<this.totalPages.x)&&(this._.newCurrentPage.x=d.x),d.y!=null&&(!this.opts.keepInContainer||d.y>=0&&d.y<this.totalPages.y)&&(this._.newCurrentPage.y=d.y);var j={x:0,y:0};this.swipeAxis.indexOf("horizontal")!==-1&&(j.x=-this._.newCurrentPage.x*this.containerSize.width),this.swipeAxis.indexOf("vertical")!==-1&&(j.y=-this._.newCurrentPage.y*this.containerSize.height),c.Transform.translate2d(this.el,j.x,j.y);var k={x:h.x!==this._.newCurrentPage.x?this._.newCurrentPage.x:b,y:h.y!==this._.newCurrentPage.y?this._.newCurrentPage.y:b};if(k.x!==b||k.y!==b){if(a.jQuery){var l=jQuery.Event("swipecore.pageable.pagechange",{pageChangedTo:k});$(this.el).trigger(l)}this.trigger&&this.trigger("swipecore.pageable.pagechange",{pageChangedTo:k})}var m=this;g.noTransition?(this.el.style.webkitTransition="",this.el.style.MozTransition="",i.call(this,g)):(this.el.style.webkitTransition="-webkit-transform "+parseFloat(this.opts.swipeTransitionDuration/1e3)+"s ease",this.el.style.MozTransition="-moz-transform "+parseFloat(this.opts.swipeTransitionDuration/1e3)+"s ease",this._.updateCurrentPageId.push(a.setTimeout(function(){i.call(m,g)},this.opts.swipeTransitionDuration)))},i=function(b){a.clearTimeout(this._.updateCurrentPageId.pop()),this._.transitionInterrupted||(this.currentPage=this._.newCurrentPage,b.updatePagination&&k.call(this),delete this._.lastDisplacement,delete this._.newCurrentPage)},j=function(){var a=this;this.pagination={},this.opts.paginationOl&&(this.opts.paginationOl.horizontal&&(this.pagination.x=new c.Pagination(this.opts.paginationOl.horizontal,{fillLi:function(a,b){a.innerHTML=b+1},endCallback:function(b){a.show({x:b}),a.el.setAttribute("title",a.currentPage.x+1+" of "+a.totalPages.x)},activeClassName:this.opts.paginationOl.activeClassName})),this.opts.paginationOl.vertical&&(this.pagination.y=new c.Pagination(this.opts.paginationOl.vertical,{fillLi:function(a,b){a.innerHTML=b+1},endCallback:function(b){a.show({y:b}),a.el.setAttribute("title",a.currentPage.y+1+" of "+a.totalPages.y)},activeClassName:this.opts.paginationOl.activeClassName})))},k=function(){if(!this.opts.paginationOl)return;if(this.swipeAxis.indexOf("horizontal")!==-1&&this.opts.paginationOl.horizontal){var a=this.opts.paginationOl.horizontal,b=a.childElementCount;for(var c=0;c<a.childElementCount;c++)parseInt(a.children[c].id.match(/pagination-([0-9]+)-[0-9]+/)[1])!==this.pagination.x.uid&&(a.removeChild(a.children[c]),c--);var d=this.totalPages.x-a.childElementCount;for(var c=0;c<d;c++)this.pagination.x.add();var e=a.childElementCount-this.totalPages.x;for(var c=0;c<e;c++)this.pagination.x.remove();this.pagination.x.setActive(this.currentPage.x),this.pagination.x.el.setAttribute("title",this.currentPage.x+1+" of "+this.totalPages.x)}if(this.swipeAxis.indexOf("vertical")!==-1&&this.opts.paginationOl.vertical){var f=this.opts.paginationOl.vertical,d=this.totalPages.y-f.childElementCount;for(var c=0;c<d;c++)this.pagination.y.add();var e=f.childElementCount-this.totalPages.y;for(var c=0;c<e;c++)this.pagination.y.remove();this.pagination.y.setActive(this.currentPage.y),this.pagination.y.el.setAttribute("title",this.currentPage.y+1+" of "+this.totalPages.y)}return this.pagination},l=function(){c.Transform.translate2d(this.el,0,0);for(var a=0;a<this.el.childElementCount;a++){var b=this.el.children[a];c.Transform.translate2d(b,0,0)}},m={x:0,y:0},n=0,o={keepInContainer:!0,rubberBandBounceBack:!0,cacheIntoMemory:!1,allowTwoFingerSwipe:!0,rubberBandBounceBack:!0,swipeTransitionDuration:400},p=c.extend({constructor:function(a,b){that=this,this._={},this._.initialOffset={x:0,y:0},this._.lastTouchTimeStamp,this._.lastSwipeDireciton={x:0,y:0},this._.lastDisplacement,this._.transitionInterrupted=!1,this._.updateCurrentPageId=new Array;if(a==="horizontal"||a==="vertical")a==="horizontal"?this.swipeAxis=[a]:a==="vertical"&&(this.swipeAxis=[a]);else{if(!(a instanceof Array)||a.indexOf("horizontal")===-1&&a.indexOf("vertical")===-1)throw new Error("SwipeCore: Pageable: the parameter `swipeAxis` is properly not defined");this.swipeAxis=a}b.paginationOl.activeClassName||(b.paginationOl.activeClassName="hot"),this.opts=c.Utils.defaults(b,o),this.opts.keepInContainer||(this.opts.rubberBandBounceBack=!1),this.opts.countPages?this.innerCountPages=this.opts.countPages:this.innerCountPages=g,this.opts.cacheInMemory&&l.call(this);if(this.opts.paginationOl&&this.opts.paginationOl.DOCUMENT_NODE===9){if(this.swipeAxis.length!==1)throw new Error("SwipeCore: Pageable: ambiguous which axis the pagaintionOl represents");this.swipeAxis.indexOf("horizontal")!==-1?this.opts.paginationOl={horizontal:this.opts.paginationOl}:this.opts.paginationOl={vertical:this.opts.paginationOl}}return this.frozen=!1,this.currentPage={x:0,y:0},this.countPages.call(this),this.containerSize={height:this.el.parentNode.clientHeight,width:this.el.parentNode.clientWidth},this.el.style.webkitTransition="-webkit-transform "+parseFloat(this.opts.swipeTransitionDuration/1e3)+"s ease",this.el.style.MozTransition="-moz-transform "+parseFloat(this.opts.swipeTransitionDuration/1e3)+"s ease",j.call(this),k.call(this),this.el.addEventListener("resize",function(){that.containerSize={height:that.el.parentNode.clientHeight,width:that.el.parentNode.clientWidth},that.countPages.call(that)}),this.el.addEventListener("orientationchange",function(){that.containerSize={height:that.el.parentNode.clientHeight,width:that.el.parentNode.clientWidth},that.countPages.call(that)}),c.Events&&c.Utils.extend(this,c.Events),this.opts.listenerElement},onTouchStart:function(b){this.trigger&&this.trigger("swipecore.pageable.touchstart",{e:b});var d=this._.initialOffset,e=new WebKitCSSMatrix(a.getComputedStyle(this.el).webkitTransform);this._.initialOffset.x=e.e,this._.initialOffset.y=e.f;var g=new Date;if(g-this._.lastTouchTimeStamp<this.opts.swipeTransitionDuration){this._.transitionInterrupted=!0,a.clearTimeout(this._.updateCurrentPageId.pop());var h=(g-this._.lastTouchTimeStamp)/this.opts.swipeTransitionDuration,i=f(h,.25,.1,.25,1,100),j={x:i*this.containerSize.width*this._.lastSwipeDireciton.x*m.x,y:i*this.containerSize.height*-this._.lastSwipeDireciton.y*m.y},l={x:0,y:0};this.swipeAxis.indexOf("horizontal")!==-1&&(l.x=this._.initialOffset.x),this.swipeAxis.indexOf("vertical")!==-1&&(l.y=this._.initialOffset.y),c.Transform.translate2d(this.el,l.x,l.y);var n={};this.swipeAxis.indexOf("horizontal")!==-1&&(Math.abs(j.x)>this.containerSize.width*.5?this._.lastSwipeDireciton.x>0?n.x=this.opts.keepInContainer?Math.min(this.currentPage.x+1,this.totalPages.x-1):this.currentPage.x+1:this._.lastSwipeDireciton.x<0?n.x=this.opts.keepInContainer?Math.max(0,this.currentPage.x-1):this.currentPage.x-1:n.x=this.currentPage.x:n.x=this.currentPage.x,this.currentPage.x=n.x),this.swipeAxis.indexOf("vertical")!==-1&&(Math.abs(j.y)>this.containerSize.height*.5?this._.lastSwipeDireciton.y<0?n.y=this.opts.keepInContainer?Math.min(this.currentPage.y+1,this.totalPages.y-1):this.currentPage.y+1:this._.lastSwipeDireciton.y>0?n.y=this.opts.keepInContainer?Math.max(0,this.currentPage.y-1):this.currentPage.y-1:n.y=this.currentPage.y:n.y=this.currentPage.y,this.currentPage.y=n.y),k.call(this)}this.el.style.webkitTransition="",this.el.style.MozTransition="",e=new WebKitCSSMatrix(a.getComputedStyle(this.el).webkitTransform),this._.initialOffset.x=e.e,this._.initialOffset.y=e.f,this._.lastSwipeDireciton={x:0,y:0}},onTouchMove:function(b){if(this.frozen)return;b.originalEvent.preventDefault(),this.trigger&&this.trigger("swipecore.pageable.touchmove",{e:b});var d=function(a){return a*.5},e={x:!1,y:!1},f={x:b.touches.get(0).displacement.x>0,y:b.touches.get(0).displacement.y>0},g={x:b.touches.get(0).displacement.x===0,y:b.touches.get(0).displacement.y===0},h={x:this.currentPage.x===0,y:this.currentPage.y===0},i={x:this.currentPage.x===this.totalPages.x-1,y:this.currentPage.y===this.totalPages.y-1};if(this.opts.rubberBandBounceBack){if(f.x&&h.x||!f.x&&i.x)e.x=!0;if(f.y&&h.y||!f.y&&i.y)e.y=!0}var j={x:0,y:0};if(this.swipeAxis.indexOf("horizontal")!==-1){var k=e.x?d(b.touches.get(0).displacement.x,this.containerSize.width*.75):b.touches.get(0).displacement.x;j.x=this._.initialOffset.x+k}if(this.swipeAxis.indexOf("vertical")!==-1){var k=e.y?d(b.touches.get(0).displacement.y,this.containerSize.height*.75):b.touches.get(0).displacement.y;j.y=this._.initialOffset.y+k}b.touches.get(0).displacement.x>0?this._.lastSwipeDireciton.x=-1:b.touches.get(0).displacement.x<0?this._.lastSwipeDireciton.x=1:this._.lastSwipeDireciton.x=0,b.touches.get(0).displacement.y>0?this._.lastSwipeDireciton.y=1:b.touches.get(0).displacement.y<0?this._.lastSwipeDireciton.y=-1:this._.lastSwipeDireciton.y=0,c.Transform.translate2d(this.el,j.x,j.y);if(f.x&&h.x&&!g.x){if(a.jQuery){var l=jQuery.Event("swipecore.pageable.touchmove.beyondFirstPage.x",{e:b});$(this.el).trigger(l)}this.trigger&&this.trigger("swipecore.pageable.touchmove.beyondFirstPage.x",{e:b,lastHasTurn:m})}if(!f.x&&i.x&&!g.y){if(a.jQuery){var n=jQuery.Event("swipecore.pageable.touchmove.beyondLastPage.x",{e:b});$(this.el).trigger(n)}this.trigger&&this.trigger("swipecore.pageable.touchmove.beyondLastPage.x",{e:b,lastHasTurn:m})}if(f.y&&h.y&&!g.x){if(a.jQuery){var o=jQuery.Event("swipecore.pageable.touchmove.beyondFirstPage.y",{e:b});$(this.el).trigger(o)}this.trigger&&this.trigger("swipecore.pageable.touchmove.beyondFirstPage.y",{e:b,lastHasTurn:m})}if(!f.y&&i.y&&!g.y){if(a.jQuery){var p=jQuery.Event("swipecore.pageable.touchmove.beyondLastPage.y",{e:b});$(this.el).trigger(p)}this.trigger&&this.trigger("swipecore.pageable.touchmove.beyondLastPage.y",{e:b,lastHasTurn:m})}},onTouchEnd:function(b){if(this.frozen)return;this.shouldFreezeAtTouchEnd&&(console.log("pageable: freezing at touchend"),this.shouldFreezeAtTouchEnd=!1,this.freeze());var c={x:b.touches.getAveragedDisplacement().x,y:b.touches.getAveragedDisplacement().y},d=b.touches.get(0).duration,f=b.maxNumFinger===2&&this.opts.allowTwoFingerSwipe?!0:!1,g={};this.swipeAxis.indexOf("horizontal")!==-1&&(e(Math.abs(c.x),d,this.containerSize.width)?c.x>0?g.x=f?0:this.currentPage.x-1:g.x=f?this.totalPages.x-1:this.currentPage.x+1:g.x=this.currentPage.x),this.swipeAxis.indexOf("vertical")!==-1&&(e(Math.abs(c.y),d,this.containerSize.height)?c.y>0?g.y=f?0:this.currentPage.y-1:g.y=f?this.totalPages.y-1:this.currentPage.y+1:g.y=this.currentPage.y),this._.transitionInterrupted=!1,m={x:g.x!==this.currentPage.x?1:0,y:g.y!==this.currentPage.y?1:0},this.show(g),this._.lastTouchTimeStamp=new Date,this._.lastDisplacement=c;var h={x:b.touches.get(0).displacement.x>0,y:b.touches.get(0).displacement.y>0},i={x:this.currentPage.x===0,y:this.currentPage.y===0},j={x:this.currentPage.x===this.totalPages.x-1,y:this.currentPage.y===this.totalPages.y-1};if(h.x&&i.x){if(a.jQuery){var k=jQuery.Event("swipecore.pageable.touchend.beyondFirstPage.x",{e:b,lastHasTurn:m});$(this.el).trigger(k)}this.trigger&&this.trigger("swipecore.pageable.touchend.beyondFirstPage.x",{e:b,lastHasTurn:m})}if(!h.x&&j.x){if(a.jQuery){var l=jQuery.Event("swipecore.pageable.touchend.beyondLastPage.x",{e:b,lastHasTurn:m});$(this.el).trigger(l)}this.trigger&&this.trigger("swipecore.pageable.touchend.beyondLastPage.x",{e:b,lastHasTurn:m})}if(h.y&&i.y){if(a.jQuery){var n=jQuery.Event("swipecore.pageable.touchend.beyondFirstPage.y",{e:b,lastHasTurn:m});$(this.el).trigger(n)}this.trigger&&this.trigger("swipecore.pageable.touchend.beyondFirstPage.y",{e:b,lastHasTurn:m})}if(!h.y&&j.y){if(a.jQuery){var o=jQuery.Event("swipecore.pageable.touchend.beyondLastPage.y",{e:b,lastHasTurn:m});$(this.el).trigger(o)}this.trigger&&this.trigger("swipecore.pageable.touchend.beyondLastPage.y",{e:b,lastHasTurn:m})}this.trigger&&this.trigger("swipecore.pageable.touchend",{e:b,lastHasTurn:m,shouldTurnPage:e(Math.abs(c.x),d,this.containerSize.width)})},onTouchCancel:function(a){},destroy:function(){this.pagination.x&&(this.pagination.x.el.removeAttribute("title"),this.pagination.x.destroy()),this.pagination.y&&(this.pagination.y.el.removeAttribute("title"),this.pagination.y.destroy()),this.el.style.webkitTransition="",this.el.style.webkitTransform="",this.el.style.mozTransition="",this.el.style.mozTransform=""},attach:function(a){var b=c.Utils.defaults(a,{firstTime:!1});b.firstTime||(this.pagination.x&&this.pagination.x.attach(),this.pagination.x&&this.pagination.y.attach())},detach:function(){this.pagination.x&&this.pagination.x.detach(),this.pagination.x&&this.pagination.y.detach()},"public":{show:function(a,c){if(typeof a=="number")this.swipeAxis.indexOf("horizontal")!==-1?h.call(this,{x:a},c):this.swipeAxis.indexOf("vertical")!==-1&&h.call(this,{y:a},c);else if(typeof a=="object"&&a!==null)a.x===b&&(a.x=this.currentPage.x),a.y===b&&(a.y=this.currentPage.y),h.call(this,a,c);else if(typeof a=="string")a==="next"?this.swipeAxis.indexOf("horizontal")!==-1?h.call(this,{x:this.currentPage.x+1},c):this.swipeAxis.indexOf("vertical")!==-1&&h.call(this,{y:this.currentPage.y+1},c):a==="prev"?this.swipeAxis.indexOf("horizontal")!==-1?h.call(this,{x:this.currentPage.x-1},c):this.swipeAxis.indexOf("vertical")!==-1&&h.call(this,{y:this.currentPage.y-1},c):a==="last"?this.swipeAxis.indexOf("horizontal")!==-1?h.call(this,{x:this.totalPages.x-1},c):this.swipeAxis.indexOf("vertical")!==-1&&h.call(this,{y:this.totalPages.y-1},c):a==="first"&&(this.swipeAxis.indexOf("horizontal")!==-1?h.call(this,{x:0},c):this.swipeAxis.indexOf("vertical")!==-1&&h.call(this,{y:0},c));else if(a===b||a===null){var d=n?n:this.totalPages,e={x:this.currentPage.x/d.x,y:this.currentPage.y/d.y};h.call(this,{x:Math.round(e.x*this.totalPages.x),y:Math.round(e.y*this.totalPages.y)},c)}},countPages:function(){return n=this.totalPages,this.totalPages=this.innerCountPages.call(this)},updatePagination:function(){return k.call(this)},toggleFreeze:function(){return this.pagination.x&&this.pagination.x.toggleFreeze(),this.pagination.y&&this.pagination.y.toggleFreeze(),this.frozen=!this.frozen},freeze:function(){return this.pagination.x&&this.pagination.x.freeze(),this.pagination.y&&this.pagination.y.freeze(),this.frozen=!0},unfreeze:function(){return this.pagination.x&&this.pagination.x.unfreeze(),this.pagination.y&&this.pagination.y.unfreeze(),this.frozen=!1},getNumPages:function(){},setNumPages:function(){},translate:function(a,b){b&&b.noTransition?(this.el.style.webkitTransition="",this.el.style.MozTransition=""):(this.el.style.webkitTransition="-webkit-transform "+parseFloat(this.opts.swipeTransitionDuration/1e3)+"s ease",this.el.style.MozTransition="-moz-transform "+parseFloat(this.opts.swipeTransitionDuration/1e3)+"s ease");var d={x:0,y:0};this.swipeAxis.indexOf("horizontal")!==-1&&(d.x=-a.x-this.currentPage.x*this.containerSize.width),this.swipeAxis.indexOf("vertical")!==-1&&(d.y=-a.y-this.currentPage.y*this.containerSize.height),c.Transform.translate2d(this.el,d.x,d.y)}}});if(a.SwipeCore.Pageable)throw new Error("Pageable is already loaded");a.SwipeCore.Pageable=p,a.jQuery&&function(b){b.fn.Pageable=function(b,c){var d=[];return this.each(function(){d.push(new a.SwipeCore.Pageable(this,b,c))}),d.length<=1&&(d=d[0]),d}}(a.jQuery)}(window,undefined),function(a,b){var c=a.SwipeCore,d=function(){for(var a=0;a<this.el.childElementCount;a++)this.el.children[a].className=this.el.children[a].className.replace(new RegExp("[ ]*"+this.opts.activeClassName),"")},e={fillLi:function(a,b){a.innerHTML=b+1},activeClassName:"hot"},f=c.extend({constructor:function(a){return this.opts=c.Utils.defaults(a,e),this.uid=c.Utils.uniqueId(),this.frozen=!1,this.__defineGetter__("length",function(){return this.el.childElementCount}),this.el},onTouchStart:function(a){if(this.frozen)return;var b=a.touches.get(0).target;b.nodeName.match(/li/i)&&(d.call(this),b.className.match(this.opts.activeClassName)||(b.className+=" "+this.opts.activeClassName))},onTouchMove:function(a){a.originalEvent.preventDefault();if(this.frozen)return;var b=a.touches.get(0).target;b.nodeName.match(/li/i)&&(d.call(this),b.className.match(this.opts.activeClassName)||(b.className+=" "+this.opts.activeClassName),this.active=parseInt(b.id.match(/pagination-[0-9]+-([0-9]+)/)[1]))},onTouchEnd:function(a){if(this.frozen)return;var b=a.touches.get(0).target;b.nodeName.match(/li/i)&&(d.call(this),b.className.match(this.opts.activeClassName)||(b.className+=" "+this.opts.activeClassName),this.active=parseInt(b.id.match(/pagination-[0-9]+-([0-9]+)/)[1])),this.opts.endCallback&&this.opts.endCallback.call(this,this.active)},onTouchCancel:function(a){},destroy:function(){this.el.innerHTML=""},"public":{add:function(){var a=document.createElement("li");a.id="pagination-"+this.uid+"-"+this.el.childElementCount,this.opts.fillLi.call(this,a,this.el.childElementCount),this.el.appendChild(a)},remove:function(){var a=this.el.children[this.el.childElementCount-1];this.el.removeChild(a)},setActive:function(a){return this.active=a,d.call(this),this.el.children[a]&&!this.el.children[a].className.match(this.opts.activeClassName)&&(this.el.children[a].className+=" "+this.opts.activeClassName),this.active},toggleFreeze:function(){return this.frozen=!this.frozen},freeze:function(){return this.frozen=!0},unfreeze:function(){return this.frozen=!1}}});if(a.SwipeCore.Pagination)throw new Error("Pagination is already loaded");a.SwipeCore.Pagination=f,a.jQuery&&function(b){b.fn.Pagination=function(b){var c=[];return this.each(function(){c.push(new a.SwipeCore.Pagination(this,swipeAxis,b))}),c.length<=1&&(c=c[0]),c}}(a.jQuery)}(window,undefined),function(a,b){var c=a.SwipeCore,d=!1,e=c.extend({constructor:function(a){if(!c.hasTouch())return null},onTouchStart:function(a){a.originalEvent.preventDefault(),d=!1},onTouchMove:function(a){d=!0},onTouchEnd:function(a){if(d===!1){var b=document.elementFromPoint(a.touches.get(0).position.x,a.touches.get(0).position.y);b.nodeType===3&&(b=b.parentNode);var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!0),b.dispatchEvent(c)}},onTouchCancel:function(a){},"public":{}});if(a.SwipeCore.NoClickDelay)throw new Error("NoClickDelay is already loaded");a.SwipeCore.NoClickDelay=e,a.jQuery&&function(b){b.fn.NoClickDelay=function(b,c){var d=[];return this.each(function(){d.push(new a.SwipeCore.NoClickDelay(this,b,c))}),d.length<=1&&(d=d[0]),d}}(a.jQuery)}(window,undefined);